{"type":"layer2","id":"aztec","createdAt":1623153328,"display":{"name":"Zk.Money v1 (Aztec v1)","shortName":"Zk.Money v1","slug":"aztecv1","warning":"EOL: Ownership of the rollup contract is irrevocably renounced and Aztec is not running a rollup processor (operator). Users or third parties have to [run the rollup system by themselves](https://github.com/AztecProtocol/aztec-v2-ejector/) to withdraw or transact.","description":"Zk.Money v1 (Aztec v1, or sometimes called Aztec 2.0) is an open source layer 2 network that aims to enable affordable, private crypto payments via zero-knowledge proofs.","purposes":["Payments","Privacy"],"category":"ZK Rollup","links":{"websites":["https://aztec.network/"],"apps":["https://old.zk.money"],"documentation":[],"explorers":[],"repositories":["https://github.com/AztecProtocol/aztec-2-bug-bounty"],"socialMedia":["https://twitter.com/aztecnetwork","https://medium.com/aztec-protocol","https://discord.gg/UDtJr9u","https://plonk.cafe/"]},"activityDataSource":"Explorer API"},"config":{"escrows":[{"address":"0x737901bea3eeb88459df9ef1BE8fF3Ae1B42A2ba","chain":"ethereum","sinceTimestamp":1614799636,"tokens":["ETH","DAI","renBTC","USDT"]}],"trackedTxs":[{"uses":[{"type":"liveness","subtype":"stateUpdates"},{"type":"l2costs","subtype":"stateUpdates"}],"query":{"formula":"functionCall","address":"0x737901bea3eeb88459df9ef1BE8fF3Ae1B42A2ba","selector":"0x06011a46","functionSignature":"function processRollup(bytes proofData, bytes signatures, bytes viewingKeys, bytes providerSignature, address provider, address feeReceiver, uint256 feeLimit)","sinceTimestamp":1614799636}},{"uses":[{"type":"liveness","subtype":"stateUpdates"},{"type":"l2costs","subtype":"stateUpdates"}],"query":{"formula":"functionCall","address":"0x737901bea3eeb88459df9ef1BE8fF3Ae1B42A2ba","selector":"0xd1c65264","functionSignature":"function escapeHatch(bytes proofData, bytes signatures, bytes viewingKeys)","sinceTimestamp":1614799636}}],"liveness":{"duplicateData":{"from":"stateUpdates","to":"proofSubmissions"}}},"dataAvailability":[{"layer":{"value":"Ethereum","secondLine":"Calldata","sentiment":"good","description":"The data is posted to Ethereum as calldata."},"bridge":{"value":"Enshrined","sentiment":"good","description":"The validating bridge has access to all the data, as it is posted onchain."},"mode":{"value":"State diffs"}}],"riskView":{"stateValidation":{"value":"ZK proofs (SN)","description":"SNARKs are zero knowledge proofs that ensure state correctness, but require trusted setup.","sentiment":"good","definingMetric":null,"sources":[{"contract":"RollupProcessor","references":["https://etherscan.io/address/0x737901bea3eeb88459df9ef1BE8fF3Ae1B42A2ba#code#F1#L395"]},{"contract":"TurboVerifier","references":["https://etherscan.io/address/0x48Cb7BA00D087541dC8E2B3738f80fDd1FEe8Ce8#code#F1#L37"]}]},"dataAvailability":{"value":"Onchain","description":"All of the data needed for proof construction is published on Ethereum L1.","sentiment":"good","definingMetric":null,"sources":[{"contract":"RollupProcessor","references":["https://etherscan.io/address/0x737901bea3eeb88459df9ef1BE8fF3Ae1B42A2ba#code#F1#L359"]}]},"exitWindow":{"value":"âˆž","description":"Users can exit funds at any time because contracts are not upgradeable.","sentiment":"good","definingMetric":null},"sequencerFailure":{"value":"Self sequence","description":"In the event of a sequencer failure, users can force transactions to be included in the project's chain by sending them to L1. Proposing new blocks requires creating ZK proofs.","sentiment":"good","sources":[{"contract":"RollupProcessor","references":["https://etherscan.io/address/0x737901bea3eeb88459df9ef1BE8fF3Ae1B42A2ba#code#F1#L347","https://etherscan.io/address/0x737901bea3eeb88459df9ef1BE8fF3Ae1B42A2ba#code#F1#L168"]}]},"proposerFailure":{"value":"Self propose","description":"If the Proposer fails, users can leverage the source available prover to submit proofs to the L1 bridge.","sentiment":"good","sources":[{"contract":"RollupProcessor","references":["https://etherscan.io/address/0x737901bea3eeb88459df9ef1BE8fF3Ae1B42A2ba#code#F1#L347","https://etherscan.io/address/0x737901bea3eeb88459df9ef1BE8fF3Ae1B42A2ba#code#F1#L168"]}]}},"stateDerivation":{"nodeSoftware":"There are three ways to run a node and use the escape hatch: By running the [Aztec v2 Ejector](https://github.com/AztecProtocol/aztec-v2-ejector/) during the escape hatch window, 2) by running [falafel](https://github.com/AztecProtocol/aztec-2.0/tree/master/falafel), 3) by running the [SDK](https://developers.aztec.network/#/A%20Private%20Layer%202/zkAssets/emergencyWithdraw) in escape hatch mode and connecting to an [escape hatch server](https://github.com/AztecProtocol/aztec-v2-escape-hatch-server). The two latter methods are no longer recommended by the Aztec team.","compressionScheme":"No compression scheme is used.","genesisState":"No genesis state is used.","dataFormat":"The data format used can be found [here](https://github.com/AztecProtocol/aztec-2.0/blob/master/blockchain/contracts/Decoder.sol)."},"stage":{"stage":"Stage 2","summary":[{"stage":"Stage 0","requirements":[{"satisfied":true,"description":"The project calls itself a rollup."},{"satisfied":true,"description":"State roots are posted to Ethereum L1."},{"satisfied":true,"description":"Inputs for the state transition function are posted to Ethereum L1."},{"satisfied":true,"description":"A source-available node exists that can recreate the state from Ethereum L1 data. Please note that the L2BEAT team has not verified the validity of the node source code. [View code](https://developers.aztec.network/#/A%20Private%20Layer%202/zkAssets/emergencyWithdraw)"}]},{"stage":"Stage 1","requirements":[{"satisfied":true,"description":"A complete and functional proof system is deployed."},{"satisfied":true,"description":"Users are able to exit without the help of the permissioned operators."},{"satisfied":true,"description":"In case of an unwanted upgrade by actors more centralized than a Security Council, users have at least 7d to exit."}]},{"stage":"Stage 2","requirements":[{"satisfied":true,"description":"Users can exit through the escape hatch mechanism and the rollup contract is immutable."}]}]},"technology":{"stateCorrectness":{"name":"Validity proofs ensure state correctness","description":"Each update to the system state must be accompanied by a ZK proof that ensures that the new state was derived by correctly applying a series of valid user transactions to the previous state. These proofs are then verified on Ethereum by a smart contract.","risks":[],"references":[{"text":"RollupProcessor.sol#L395 - Etherscan source code","href":"https://etherscan.io/address/0x737901bea3eeb88459df9ef1BE8fF3Ae1B42A2ba#code#F1#L395"}]},"newCryptography":{"name":"Zero knowledge SNARK cryptography is used","description":"Despite their production use zkSNARKs are still new and experimental cryptography. Cryptography has made a lot of advancements in the recent years but all cryptographic solutions rely on time to prove their security. In addition zkSNARKs require a trusted setup to operate.","risks":[{"category":"Funds can be stolen if","text":"the cryptography is broken or implemented incorrectly."}],"references":[{"text":"TurboVerifier.sol#L37 - Etherscan source code","href":"https://etherscan.io/address/0x48Cb7BA00D087541dC8E2B3738f80fDd1FEe8Ce8#code#F1#L37"}]},"dataAvailability":{"name":"All data required for proofs is published onchain","description":"All the data that is used to construct the system state is published onchain in the form of cheap calldata. This ensures that it will always be available when needed.","risks":[],"references":[{"text":"RollupProcessor.sol#L359 - Etherscan source code","href":"https://etherscan.io/address/0x737901bea3eeb88459df9ef1BE8fF3Ae1B42A2ba#code#F1#L359"}]},"operator":{"name":"No regular operators","risks":[],"description":"Only specific addresses appointed by the owner are permitted to propose new blocks during regular rollup operations. Since EOL, these operators are not regularly processing the rollup anymore.","references":[{"text":"RollupProcessor.sol#L97 - Etherscan source code","href":"https://etherscan.io/address/0x737901bea3eeb88459df9ef1BE8fF3Ae1B42A2ba#code#F1#L97"},{"text":"RollupProcessor.sol#L369 - Etherscan source code","href":"https://etherscan.io/address/0x737901bea3eeb88459df9ef1BE8fF3Ae1B42A2ba#code#F1#L369"}]},"forceTransactions":{"name":"Users can force any transaction","description":"Because the block production is open to anyone if users experience censorship from the operator they can propose their own blocks which would include their transactions.The private key of one of the permissioned operators is public (first Anvil address), therefore anyone can in principle resume regular operations. No funds need to be deposited to that address since submitting signatures is enough. Every 16h a special 48m window (escape hatch) is open during which any address can propose new blocks.","risks":[{"category":"Funds can be frozen if","text":"the operator refuses to include their transactions and users lack resources to propose blocks themselves."}],"references":[{"text":"Anvil - a local testnet node toolchain","href":"https://book.getfoundry.sh/anvil/"},{"text":"RollupProcessor.sol#L347 - Etherscan source code","href":"https://etherscan.io/address/0x737901bea3eeb88459df9ef1BE8fF3Ae1B42A2ba#code#F1#L347"},{"text":"RollupProcessor.sol#L168 - Etherscan source code","href":"https://etherscan.io/address/0x737901bea3eeb88459df9ef1BE8fF3Ae1B42A2ba#code#F1#L168"}]},"exitMechanisms":[{"name":"Regular withdraw (deprecated)","description":"The user initiates the withdrawal by submitting a transaction on L2. When the block containing that transaction is proven on L1 the assets are automatically withdrawn to the user.","risks":[],"references":[{"text":"RollupProcessor.sol#LL396 - Etherscan source code","href":"https://etherscan.io/address/0x737901bea3eeb88459df9ef1BE8fF3Ae1B42A2ba#code#F1#L396"}]},{"name":"EOL: Manual withdrawal using Aztec v2 Ejector","description":"EOL: Ownership of the rollup contract is irrevocably renounced and operators are not processing the rollup. Assets in the escrow can be manually withdrawn with the [Aztec v2 Ejector](https://github.com/AztecProtocol/aztec-v2-ejector/).","risks":[],"references":[{"text":"Aztec v2 Ejector - Codespace template for running the Aztec v2 rollup.","href":"https://github.com/AztecProtocol/aztec-v2-ejector/"}]}],"otherConsiderations":[{"name":"Payments are private","description":"Balances and identities for all tokens on the Aztec rollup are encrypted. Each transaction is encoded as a zkSNARK, protecting user data.","risks":[],"references":[{"text":"Fast Privacy, Now - Aztec Medium Blog","href":"https://medium.com/aztec-protocol/aztec-zkrollup-layer-2-privacy-1978e90ee3b6#3b25"}]}]},"contracts":{"addresses":[{"name":"AztecFeeDistributor","isVerified":true,"address":"0x41A57F5581aDf11b25F3eDb7C1DB19f18bb76734","chain":"ethereum","description":"Contract responsible for collecting transaction fees and reimbursing gas to whitelisted Rollup Providers."},{"name":"TurboVerifier","isVerified":true,"address":"0x48Cb7BA00D087541dC8E2B3738f80fDd1FEe8Ce8","chain":"ethereum","description":"Turbo Plonk ZK verifier."},{"name":"RollupProcessor","isVerified":true,"address":"0x737901bea3eeb88459df9ef1BE8fF3Ae1B42A2ba","chain":"ethereum","description":""}],"risks":[]},"permissions":[{"name":"Rollup Providers","description":"Addresses that can propose new blocks during regular rollup operation. Since the private key of one of them is public (first Anvil address), anyone can in principle resume regular operations. Every 16h a special 48m window (escape hatch) is open during which anyone can propose new blocks.","accounts":[{"address":"0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266","type":"EOA"},{"address":"0xFcF75295f242C4E87203Abb5d7C9BbEda90a8895","type":"EOA"}]},{"name":"AztecMultisig","description":"A Gnosis Safe with 1 / 2 threshold.  Can update parameters related to the reimbursement of gas to permissioned rollup providers. It doesn't affect the escape hatch mechanism, but it can halt regular operations by setting a reimbursement constant that is too high.","accounts":[{"address":"0xE298a76986336686CC3566469e3520d23D1a8aaD","type":"MultiSig"}],"chain":"ethereum","participants":[{"address":"0x1D93fE338A035f297819EA867275661a4f5B4fdD","type":"EOA"},{"address":"0x7fb9f93Cc6614dDd76c893EC8b5310674aC3Fc5f","type":"EOA"}]}],"milestones":[{"name":"Aztec operator sunset","date":"2023-07-08T00:00:00Z","link":"https://github.com/AztecProtocol/aztec-v2-ejector/","description":"Aztec stops their rollup operators. Users now have to run the Rollup manually.","type":"general"},{"name":"Aztec 2.0","date":"2021-03-15T00:00:00Z","link":"https://medium.com/aztec-protocol/launching-aztec-2-0-rollup-ac7db8012f4b","description":"Private Rollup is live on mainnet, allowing user to access DeFi.","type":"general"}]}